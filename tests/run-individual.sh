#!/bin/bash

echo "ğŸ§ª é€ä¸ªè¿è¡Œæµ‹è¯•..."
echo ""

tests=(
  "æ–°å»ºæ–‡ä»¶æŒ‰é’®"
  "æ·»åŠ æ¡ç›®"
  "æ·»åŠ å¤šä¸ªæ¡ç›®"
  "åˆ›å»ºåˆ†ç±»"
  "æ‹–æ”¾æ¡ç›®åˆ°åˆ†ç±»"
  "æœç´¢åŠŸèƒ½"
  "æ¸…é™¤æœç´¢"
  "ç¼–è¾‘æ¡ç›®"
  "åˆ é™¤æ¡ç›®"
  "ä¿å­˜æ–‡ä»¶"
  "æ‰“å¼€æ–‡ä»¶"
  "æ’¤é”€æ“ä½œ"
  "é‡åšæ“ä½œ"
  "æœç´¢å¯¼èˆª"
  "æ‰¹é‡å¯¼å…¥"
  "å¤æ‚æ“ä½œé¡ºåº"
  "å¤šæ¬¡æ‹–æ‹½"
  "æ··åˆæ“ä½œ"
  "å¤šæ¬¡æ’¤é”€å’Œé‡åš"
  "è¾¹ç•Œæƒ…å†µ"
  "äº¤æ›¿æ“ä½œ"
  "åˆ†ç±»åµŒå¥—"
  "æœç´¢å’Œç¼–è¾‘ç»„åˆ"
  "å¿«é€Ÿè¿ç»­æ“ä½œ"
  "å®Œæ•´å·¥ä½œæµç¨‹"
)

passed=0
failed=0

for test in "${tests[@]}"; do
  echo "ğŸ“‹ è¿è¡Œæµ‹è¯•: $test"
  if npx playwright test --grep "$test" --timeout=30000 > /dev/null 2>&1; then
    echo "  âœ… é€šè¿‡"
    ((passed++))
  else
    echo "  âŒ å¤±è´¥"
    ((failed++))
  fi
  echo ""
done

echo "=================================================="
echo "ğŸ“Š æµ‹è¯•æ€»ç»“"
echo "=================================================="
echo "æ€»è®¡: ${#tests[@]}"
echo "é€šè¿‡: $passed"
echo "å¤±è´¥: $failed"
echo "é€šè¿‡ç‡: $(( passed * 100 / ${#tests[@]} ))%"
echo ""

if [ $failed -eq 0 ]; then
  echo "ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼"
else
  echo "âš ï¸  $failed ä¸ªæµ‹è¯•å¤±è´¥"
fi