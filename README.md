# 条目分类管理器

一个功能强大的桌面应用程序，用于管理和分类条目，支持拖拽、导入导出、文件操作等功能。

![应用图标](icon.png)

## 功能特性

### 核心功能
- ✅ **条目管理**: 添加、删除、拖拽条目
- ✅ **分类管理**: 创建分类，将条目拖拽到分类中
- ✅ **拖拽操作**: 直观的拖拽界面，轻松组织条目
- ✅ **实时计数**: 自动显示分类中的条目数量

### 文件操作
- ✅ **新建文件**: 清空所有内容，开始新的分类管理
- ✅ **打开文件**: 加载已保存的JSON文件
- ✅ **智能保存**: 自动保存到已关联的文件
- ✅ **另存为**: 保存到新文件
- ✅ **修改检测**: 自动检测未保存的修改，文件名前显示红色圆点标记
- ✅ **修改确认**: 打开文件前提示保存未保存的修改

### 导入功能
- ✅ **文件导入**: 从JSON文件导入条目或分类
- ✅ **文本粘贴**: 粘贴文本，按行自动识别条目
- ✅ **重复检测**: 自动跳过重复的条目和分类
- ✅ **批量导入**: 一次性导入多个条目或分类

### 用户体验
- ✅ **模态框确认**: 重要操作前确认，避免误操作
- ✅ **实时提示**: 操作成功/失败的即时反馈
- ✅ **空状态提示**: 无内容时显示友好提示
- ✅ **响应式设计**: 适配不同屏幕尺寸

## 技术栈

- **前端框架**: Bootstrap 5.3.0
- **桌面应用**: Electron 28.0.0
- **编程语言**: JavaScript (ES6+)
- **数据格式**: JSON

## 快速开始

### 环境要求

- Node.js 14.0 或更高版本
- npm 6.0 或更高版本

### 安装依赖

```bash
npm install
```

### 启动应用

```bash
npm start
```

### Linux系统

```bash
chmod +x start.sh
./start.sh
```

## 使用说明

### 添加条目

1. 在左侧输入框中输入条目内容
2. 按 Enter 键或点击"添加条目"按钮
3. 条目将显示在左侧列表中

### 创建分类

1. 在右侧输入框中输入分类名称
2. 按 Enter 键或点击"添加分类"按钮
3. 分类将显示在右侧区域

### 拖拽条目

1. 按住左侧列表中的条目
2. 拖拽到右侧的分类中
3. 松开鼠标，条目将移动到该分类

### 导入条目

1. 点击"导入条目"按钮
2. 选择导入方式：
   - **文件导入**: 选择JSON文件
   - **文本粘贴**: 粘贴文本，每行一个条目
3. 点击"导入"按钮

### 文件操作

#### 新建文件
1. 点击"新建文件"按钮
2. 确认清空所有内容
3. 开始新的分类管理

#### 打开文件
1. 点击"打开文件"按钮
2. 选择要打开的JSON文件
3. 如果有未保存的修改，选择保存、放弃或取消

#### 保存文件
1. 点击"保存文件"按钮
2. 如果已关联文件，直接保存
3. 如果未关联，自动打开另存为对话框

#### 另存为
1. 点击"另存为"按钮
2. 选择保存位置和文件名
3. 点击保存

## 数据格式

### JSON文件结构

```json
{
  "version": "1.0",
  "createdAt": "2024-01-01T00:00:00.000Z",
  "items": [
    "条目1",
    "条目2",
    "条目3"
  ],
  "categories": [
    {
      "name": "分类1",
      "items": ["条目1"]
    },
    {
      "name": "分类2",
      "items": ["条目2", "条目3"]
    }
  ]
}
```

### 字段说明

- `version`: 数据格式版本
- `createdAt`: 创建时间（ISO 8601格式）
- `items`: 条目列表（字符串数组）
- `categories`: 分类列表（对象数组）
  - `name`: 分类名称
  - `items`: 分类中的条目列表

## 开发

### 项目结构

```
ItemManager/
├── index.html          # 主页面
├── main.js             # 业务逻辑
├── style.css           # 样式文件
├── electron-main.js    # Electron主进程
├── preload.js          # 预加载脚本
├── package.json        # 项目配置
├── test.js             # 自动化测试
└── assets/
    ├── css/
    │   └── bootstrap.min.css
    └── js/
        └── bootstrap.bundle.min.js
```

### 运行测试

```bash
node test.js
```

### 构建应用

```bash
# 构建所有平台
npm run build

# 仅构建Windows
npm run build-win

# 仅构建macOS
npm run build-mac

# 仅构建Linux
npm run build-linux
```

## 常见问题

### Q: 为什么保存时会下载新文件而不是覆盖原文件？

A: 如果是通过文件选择器打开的文件（没有文件句柄），无法直接覆盖。请使用"另存为"功能，选择原文件进行覆盖。Electron版本已支持直接覆盖。

### Q: 如何识别文件是否有未保存的修改？

A: 文件名前显示红色圆点标记（●）表示有未保存的修改。保存后标记会自动消失。

### Q: 支持哪些文件格式？

A: 目前只支持JSON格式。

### Q: 可以导入哪些格式的文件？

A: 支持导入JSON格式的文件，或者使用文本粘贴功能，按行导入条目。

### Q: 如何删除分类？

A: 点击分类右上角的"×"按钮，确认后删除。分类中的条目会自动移回左侧列表。

## 开发日志

详细的开发经验和技术细节请参考 [开发经验文档](DEVELOPMENT_EXPERIENCE.md)

## 贡献

欢迎提交问题报告和功能建议！

## 许可证

MIT License

## 作者

ItemManager Development Team

## 更新日志

### v1.0.0 (2024-01-14)
- ✨ 初始版本发布
- ✅ 实现条目管理功能
- ✅ 实现分类管理功能
- ✅ 实现拖拽功能
- ✅ 实现文件操作（新建、打开、保存、另存为）
- ✅ 实现导入功能（文件导入、文本粘贴）
- ✅ 实现修改检测和未保存状态显示
- ✅ 实现Electron版本
- ✅ 添加自动化测试
- ✅ 添加开发文档

## 联系方式

如有问题或建议，请通过以下方式联系：

- 提交 Issue
- 发送邮件

---

**享受条目分类管理的便利！** 🎉